class t{constructor(t){this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=320,this.element.height=400,t.appendChild(this.element)}}class s{constructor(){this.step=0,this.maxStep=6,this.sizeCell=16,this.sizeBerry=this.sizeCell/4}}class i{animate(){requestAnimationFrame(this.animate),++this.config.step<this.config.maxStep||(this.config.step=0,this.update(),this.draw())}constructor(t,i){this.update=t,this.draw=i,this.config=new s,this.animate=this.animate.bind(this),this.animate()}}class e{update(t,s,i){this.x+=this.dx,this.y+=this.dy,this.x<0?this.x=i.element.width-this.config.sizeCell:this.x>=i.element.width&&(this.x=0),this.y<0?this.y=i.element.height-this.config.sizeCell:this.y>=i.element.height&&(this.y=0),this.tails.unshift({x:this.x,y:this.y}),this.tails.length>this.maxTails&&this.tails.pop(),this.tails.forEach(((i,e)=>{i.x===t.x&&i.y===t.y&&(this.maxTails++,s.incScore(),t.randomPosition());for(let h=e+1;h<this.tails.length;h++)i.x==this.tails[h].x&&i.y==this.tails[h].y&&(this.death(),s.setToZero(),t.randomPosition())}))}draw(t){this.tails.forEach(((s,i)=>{t.fillStyle=0===i?"orange":i%2==0?"grey":"black",t.fillRect(s.x,s.y,this.config.sizeCell,this.config.sizeCell)}))}death(){this.y=160,this.dx=this.config.sizeCell,this.dy=0,this.tails=[],this.maxTails=3,this.reverseKey=""}control(){document.addEventListener("keydown",(t=>{"KeyW"==t.code&&"KeyS"!==this.reverseKey?(this.dy=-this.config.sizeCell,this.dx=0,this.reverseKey="KeyW"):"KeyA"==t.code&&"KeyD"!==this.reverseKey?(this.dx=-this.config.sizeCell,this.dy=0,this.reverseKey="KeyA"):"KeyS"==t.code&&"KeyW"!==this.reverseKey?(this.dy=this.config.sizeCell,this.dx=0,this.reverseKey="KeyS"):"KeyD"==t.code&&"KeyA"!==this.reverseKey&&(this.dx=this.config.sizeCell,this.dy=0,this.reverseKey="KeyD")}))}constructor(){this.config=new s,this.x=160,this.y=160,this.dx=this.config.sizeCell,this.dy=0,this.tails=[],this.maxTails=3,this.reverseKey="",this.control()}}class h{incScore(){this.score++,this.draw()}setToZero(){this.score=0,this.draw()}draw(){this.scoreBlock.innerHTML=this.score}constructor(t,s=0){this.scoreBlock=document.querySelector(t),this.score=s,this.draw()}}function n(t,s){return Math.floor(Math.random()*(s-t)+t)}class a{draw(t){t.beginPath(),t.fillStyle=this.randColor(),t.arc(this.x+this.config.sizeCell/2,this.y+this.config.sizeCell/2,this.config.sizeBerry,0,2*Math.PI),t.fill()}randomPosition(){this.x=n(0,this.canvas.element.width/this.config.sizeCell)*this.config.sizeCell,this.y=n(0,this.canvas.element.height/this.config.sizeCell)*this.config.sizeCell}randColor(){return"#"+Math.floor(16777215*Math.random()).toString(16).padStart(6,"0").toUpperCase()}constructor(t){this.x=0,this.y=0,this.canvas=t,this.config=new s,this.randomPosition()}}new class{update(){this.snake.update(this.berry,this.score,this.canvas)}draw(){this.canvas.context.clearRect(0,0,this.canvas.element.width,this.canvas.element.height),this.snake.draw(this.canvas.context),this.berry.draw(this.canvas.context)}constructor(s){this.canvas=new t(s),this.snake=new e,this.berry=new a(this.canvas),this.score=new h(".game-score .score-count",0),new i(this.update.bind(this),this.draw.bind(this))}}(document.querySelector(".canvas-wrapper"));
//# sourceMappingURL=index.677ae4cd.js.map
