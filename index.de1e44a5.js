!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var i={};function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){t&&s(e.prototype,t);i&&s(e,i);return e};var n=function i(s){"use strict";e(t)(this,i),this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=320,this.element.height=400,s.appendChild(this.element)},h=function i(){"use strict";e(t)(this,i),this.step=0,this.maxStep=6,this.sizeCell=16,this.sizeBerry=this.sizeCell/4},a=function(){"use strict";function s(i,n){e(t)(this,s),this.update=i,this.draw=n,this.config=new h,this.animate=this.animate.bind(this),this.animate()}return e(i)(s,[{key:"animate",value:function(){requestAnimationFrame(this.animate),++this.config.step<this.config.maxStep||(this.config.step=0,this.update(),this.draw())}}]),s}(),r=function(){"use strict";function s(){e(t)(this,s),this.config=new h,this.x=160,this.y=160,this.dx=this.config.sizeCell,this.dy=0,this.tails=[],this.maxTails=3,this.reverseKey="",this.control()}return e(i)(s,[{key:"update",value:function(e,t,i){var s=this;this.x+=this.dx,this.y+=this.dy,this.x<0?this.x=i.element.width-this.config.sizeCell:this.x>=i.element.width&&(this.x=0),this.y<0?this.y=i.element.height-this.config.sizeCell:this.y>=i.element.height&&(this.y=0),this.tails.unshift({x:this.x,y:this.y}),this.tails.length>this.maxTails&&this.tails.pop(),this.tails.forEach((function(i,n){i.x===e.x&&i.y===e.y&&(s.maxTails++,t.incScore(),e.randomPosition());for(var h=n+1;h<s.tails.length;h++)i.x==s.tails[h].x&&i.y==s.tails[h].y&&(s.death(),t.setToZero(),e.randomPosition())}))}},{key:"draw",value:function(e){var t=this;this.tails.forEach((function(i,s){e.fillStyle=0===s?"orange":s%2==0?"grey":"black",e.fillRect(i.x,i.y,t.config.sizeCell,t.config.sizeCell)}))}},{key:"death",value:function(){this.y=160,this.dx=this.config.sizeCell,this.dy=0,this.tails=[],this.maxTails=3,this.reverseKey=""}},{key:"control",value:function(){var e=this;document.addEventListener("keydown",(function(t){"KeyW"==t.code&&"KeyS"!==e.reverseKey?(e.dy=-e.config.sizeCell,e.dx=0,e.reverseKey="KeyW"):"KeyA"==t.code&&"KeyD"!==e.reverseKey?(e.dx=-e.config.sizeCell,e.dy=0,e.reverseKey="KeyA"):"KeyS"==t.code&&"KeyW"!==e.reverseKey?(e.dy=e.config.sizeCell,e.dx=0,e.reverseKey="KeyS"):"KeyD"==t.code&&"KeyA"!==e.reverseKey&&(e.dx=e.config.sizeCell,e.dy=0,e.reverseKey="KeyD")}))}}]),s}(),o=function(){"use strict";function s(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(t)(this,s),this.scoreBlock=document.querySelector(i),this.score=n,this.draw()}return e(i)(s,[{key:"incScore",value:function(){this.score++,this.draw()}},{key:"setToZero",value:function(){this.score=0,this.draw()}},{key:"draw",value:function(){this.scoreBlock.innerHTML=this.score}}]),s}();function c(e,t){return Math.floor(Math.random()*(t-e)+e)}var l=function(){"use strict";function s(i){e(t)(this,s),this.x=0,this.y=0,this.canvas=i,this.config=new h,this.randomPosition()}return e(i)(s,[{key:"draw",value:function(e){e.beginPath(),e.fillStyle=this.randColor(),e.arc(this.x+this.config.sizeCell/2,this.y+this.config.sizeCell/2,this.config.sizeBerry,0,2*Math.PI),e.fill()}},{key:"randomPosition",value:function(){this.x=c(0,this.canvas.element.width/this.config.sizeCell)*this.config.sizeCell,this.y=c(0,this.canvas.element.height/this.config.sizeCell)*this.config.sizeCell}},{key:"randColor",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16).padStart(6,"0").toUpperCase()}}]),s}();new(function(){"use strict";function s(i){e(t)(this,s),this.canvas=new n(i),this.snake=new r,this.berry=new l(this.canvas),this.score=new o(".game-score .score-count",0),new a(this.update.bind(this),this.draw.bind(this))}return e(i)(s,[{key:"update",value:function(){this.snake.update(this.berry,this.score,this.canvas)}},{key:"draw",value:function(){this.canvas.context.clearRect(0,0,this.canvas.element.width,this.canvas.element.height),this.snake.draw(this.canvas.context),this.berry.draw(this.canvas.context)}}]),s}())(document.querySelector(".canvas-wrapper"))}();
//# sourceMappingURL=index.de1e44a5.js.map
